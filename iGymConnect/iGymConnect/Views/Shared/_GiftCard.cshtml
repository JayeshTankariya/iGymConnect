<div class="modal fade" id="myGiftCard1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title" id="myModalLabel" align="center"><i><b>GIFT CARD DETAILS </b></i></h3>
            </div>
            <div class="modal-body">
                <form class="form-inline">
                    <ul class="nav nav-pills nav-stacked navbar-collapse">
                        <li role="presentation" data-toggle="modal" data-target="#myCardEntry">
                            <a href="#">
                                CARD ENTRY
                            </a>
                        </li>
                        <li role="presentation" id="btnCardTransaction" data-toggle="modal" data-target="#myCardTransaction">
                            <a href="#">
                                CARD TRANSACTION
                            </a>
                        </li>
                    </ul>

                    <br />

                </form>

            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="myCardEntry" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel" align="center"><i> CARD ENTRY DETAILS </i></h4>
            </div>
            <div class="modal-body">
                <form id="frmCardEntry">
                    <div>
                        <input type="hidden" class="form-control" id="txtId" placeholder="Plz Enter The Name">

                        <div class="form-inline">
                            <label for="exampleInputEmail2" >From <span style="display:none;color:red"> *</span></label>
                            <div >
                                <input type="text" class="form-control" id="txtFrom" placeholder="Card No. Starting From">
                                <span style="display:none;color:red" id="lblFrom">It Is Mandatory Field.</span>
                            </div>
                        </div>
                        <div class="form-inline">
                            <label for="exampleInputEmail2">To <span style="display:none;color:red"> *</span></label>
                            <div >
                                <input type="text" class="form-control" id="txtTo" placeholder="Card Ends No. to">
                                <span style="display:none;color:red" id="lblTo">It Is Mandatory Field.</span>
                            </div>
                        </div>
                        <div class="form-inline">
                            <label for="exampleInputEmail2" >Amount <span style="display:none;color:red"> *</span></label>
                            <div>
                                <input type="text" id="txtAmount" class="form-control" placeholder="Enter Amount"></input>
                                <span style="display:none;color:red" id="lblAmount">It Is Mandatory Field.</span>
                            </div>
                        </div>
                        <div class="form-inline">
                            <label for="exampleInputEmail2">Expiry Date <span style="display:none;color:red"> *</span></label>
                            <div>
                                <input type="datetime-local" class="form-control" id="txtExpiryDate">
                                <span style="display:none;color:red" id="lblExpiryDate">It Is Mandatory Field.</span>
                            </div>
                        </div>
                        </div>
                </form>  
                <span style="display:none;color:red" id="lblNumeric">Allows Only Numeric Values. </span>
                <span style="display:none;color:red" id="lblSamllValue">From value Must Be Less Than To Value. </span>
                <span style="display:none;color:red" id="lblCardExists">Already Existing. </span>
            </div>
            <div>                
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="btnGiftcardAdd"> Add </button>
                    <button type="button" class="btn btn-primary" id="btnClear"> Clear </button>
                </div>                
            </div>
        </div>
        </div>
    </div>

<div class="modal fade" id="myCardTransaction" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel"><b><i> CARD SELLING </i></b></h4>
            </div>
            <div class="modal-body">
                <form id="frmCardTransaction1" class="form-horizontal">
                    <input type="hidden" class="form-control" id="txtId" placeholder="Plz Enter The Name">
                    <div class="row">
                        <div class="form-inline">
                            <label for="exampleInputEmail2" class="col-sm-2 control-label">Card Number </label>
                            <div class="col-sm-10">
                                @Html.DropDownList("ddlCard", new SelectList(ViewBag.CardList, "Id", "Number"), "-- Select --", new { @class = "form-control" })
                            </div>
                            <span style="display:none" id="lblName">Please enter Name</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-inline">
                            <label for="exampleInputEmail2" class="col-sm-2 control-label">MemberId </label>
                            <div class="col-sm-2">
                                @Html.DropDownList("ddlMember1", new SelectList(ViewBag.MemberList, "MemberId", "MemberName"), "-- Select --", new { @class = "form-control" })

                            </div>
                        </div>

                    </div>
                </form>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="btnCardTransactionAdd"> Add </button>
                    <button type="button" class="btn btn-primary" id="btnClear1"> Clear </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function CardValidation() {
        var isSuccess = true;
        if ($('#txtFrom').val().length == 0) {
            $('#lblName').show();
            isSuccess = false;
        }
        else {
            $('#lblName').hide();
        }

        return isSuccess;
    }


    $(document).ready(function () {
        $('#btnGiftcardAdd').on('click', function () {
            var error = 0;
            var From = $('#txtFrom').val();
            if (From == '')
            {
                error = 1;
                $('#lblFrom').show();
            }
            var To = $('#txtTo').val();
            if (To == '') {
                error = 1;
                $('#lblTo').show();
            }
            var Amount = $('#txtAmount').val();
            if (Amount == '') {
                error = 1;
                $('#lblAmount').show();
            }
            var ExpiryDate = $('#txtExpiryDate').val();
            if (ExpiryDate == '') {
                error = 1;
                $('#lblExpiryDate').show();
            }            
            if (error)
            {
                return false;
            }
            if (CardValidation()) {
                
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GenerateCard", "POS")',
                    data: { From: $('#txtFrom').val(), To: $('#txtTo').val(), Amount: $('#txtAmount').val(), ExpiryDate: $('#txtExpiryDate').val() },
                    success: function (data) {
                        if (data == true) {
                            alert("Card saved successully.");
                            location.reload();
                            
                        }
                        else {
                            alert("Card range numbers is already exist, Please enter another card range.");
                        }
                    }
                });
            }
        });
        
        $('#btnCardTransactionAdd').on('click', function () {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetMemberIdInCard", "POS")',
                data: { Number: $('#ddlCard').val(), MemberId: $('#ddlMember1').val() },
                success: function (data) {                    
                    //$.each(data, function (index, element) {
                    //    //alert(element.Number , element.MemberId);
                       
                    //});
                    if (data != null) {
                        location.reload();
                        
                    }                    
                }
            });
        });

        $('#btnClear').on('click', function () {
            document.getElementById("frmCardEntry").reset();
        });
        $('#btnClear1').on('click', function () {
            document.getElementById("frmCardTransaction1").reset();
        });

        $('#txtFrom').keypress(function (e) {
            var regex = new RegExp("^[0-9]");
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                $('#lblNumeric').hide();
                return true;
            }
            $('#lblNumeric').show();
            e.preventDefault();
            return false;

        });
        $('#txtTo').keypress(function (e) {
            var regex = new RegExp("^[0-9]");
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                $('#lblNumeric').hide();
                return true;
            }
            $('#lblNumeric').show();
            e.preventDefault();
            return false;            
            
        });
        $('#txtTo').on('blur',function (e) {
            var err = 0;
            var From = $('#txtFrom').val();
            var To = $('#txtTo').val();
            if (From > To) {
                err = 1;
                $('#lblSamllValue').show();
            }
            if (!err) {
                return true;
            }
            else {
                return false;
            }
        });
        $('#txtAmount').keypress(function (e) {
            var regex = new RegExp("^[0-9]");
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                $('#lblNumeric').hide();
                return true;
            }
            $('#lblNumeric').show();
            e.preventDefault();
            return false;

        });

        @*$('#txtFrom').keyup(function () {
            $.ajax({
                type: "POST",
                url: '@Url.Action("CheckDulplicationCard", "POS")',
                data: { Id: $('#txtId').val() == "" ? "0" : $('#txtId').val(), Number: $('#txtFrom').val() },
                success: function (data) {
                    if (data == 'True') {
                        
                    }
                    else {
                        $('#lblCardExists').hide();
                    }
                }

            });
        });*@

       
    });

</script>